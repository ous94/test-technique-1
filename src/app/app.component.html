<div class="row"> 
  <div class="col-md-12 col-md-offset-3">
      <form [formGroup]="subscription" id="msform">
          <!-- progressbar -->
          <ul id="progressbar">
              <li [ngClass]="step>=1 ? 'active ' : 'inactive'">Select Subscription Parameters</li>
              <li [ngClass]="step>=2 ? 'active' : 'inactive'">Payment Data</li>
              <li [ngClass]="step==3 ? 'active' : 'inactive'">Confirmation</li>
          </ul>
          <!-- Subscription Parameters -->
          <fieldset  *ngIf="step == 1" >
              <h2 class="fs-title">Select Subscription Parameters</h2>
              <label>Duration months</label>
              <select type="text" formControlName="duration" 
              [ngClass]="{
                'is-invalid': subscription_step && subscriptionControls['duration'].errors,
                'has-danger': subscription.controls['duration'].invalid && (subscription.controls['duration'].dirty || subscription.controls['duration'].touched),
                'has-success': subscription.controls['duration'].valid && (subscription.controls['duration'].dirty || subscription.controls['duration'].touched)
              }"
              >
                <option [ngValue]="duration" *ngFor="let duration of pricesArray">{{duration?.duration_amonths}}</option>
              </select>
              <div *ngIf="subscription_step && subscription.controls['duration'].errors">
                  <div class="error" *ngIf="subscriptionControls['duration'].errors?.['required']">Duration is required</div>
              </div>
              <label>Amount of gigabytes</label>
              <select type="text" formControlName="amount" 
              [ngClass]="{
                'is-invalid': subscription_step && subscriptionControls['amount'].errors,
                'has-danger': subscription.controls['amount'].invalid && (subscription.controls['amount'].dirty || subscription.controls['amount'].touched),
                'has-success': subscription.controls['amount'].valid && (subscription.controls['amount'].dirty || subscription.controls['amount'].touched)
              }"
              >
                <option>5</option>
                <option>10</option>
                <option>50</option>
              </select>
              <div *ngIf="subscription_step && subscription.controls['amount'].errors">
                <div class="error" *ngIf="subscriptionControls['amount'].errors?.['required']">Amount is required</div>
             </div>
             <label>Upfront payment </label>
             <section>
                 <input value="false" formControlName="upfront"  [ngClass]="{ 'is-invalid': subscription_step && subscriptionControls['upfront'].errors }"  type="radio" name="upfront"  checked>
                 <label  for="default">No</label>
             </section>
                  <section>
                    <input value="true" formControlName="upfront"  [ngClass]="{ 'is-invalid': subscription_step && subscriptionControls['upfront'].errors }" type="radio" name="upfront" id="outline" class="custom-radio">
                    <label for="outline">Yes</label>
                </section>
              <div *ngIf="subscription_step && subscription.controls['upfront'].errors">
                <div *ngIf="subscriptionControls['upfront'].errors?.['required']">upfront is required</div>
            </div>
              <button (click)="next()" type="button"  class="next action-button">Next</button>
              
          </fieldset>
      </form>

<!-- Payment Data  -->
      <form [formGroup]="payment" id="msform">
        <fieldset *ngIf="step ==2">
            <h2 class="fs-title">Payment Data</h2>
            <div>
              <label >Final Price: <span>{{totalPrice}}</span></label>
            </div>
            <div>
              <label >Duration Months: <span>{{subscription.get('duration')?.value.duration_amonths}}</span></label>
            </div>

            <div>
              <label>Credit card number</label>
            </div>
            <input type="text" class="input" pattern="[0-9]+" 
            [ngClass]="{
              'has-danger': payment.controls['credit_card_number'].invalid && (payment.controls['credit_card_number'].dirty || payment.controls['credit_card_number'].touched),
              'has-success': payment.controls['credit_card_number'].valid && (payment.controls['credit_card_number'].dirty || payment.controls['credit_card_number'].touched)
            }"

            formControlName="credit_card_number"  placeholder="credit card number"/>
            <div *ngIf="payment_step && payment.controls['credit_card_number'].errors">
                <div class="error" *ngIf="paymentControls['credit_card_number'].errors?.['required']">Credit card number is required</div>
            </div>
            <label>Credit card expiration date</label>
            <input type="date" class="input" formControlName="credit_card_expiration_date"  
            [ngClass]="{
              'has-danger': payment.controls['credit_card_expiration_date'].invalid && (payment.controls['credit_card_expiration_date'].dirty || payment.controls['credit_card_expiration_date'].touched),
              'has-success': payment.controls['credit_card_expiration_date'].valid && (payment.controls['credit_card_expiration_date'].dirty || payment.controls['credit_card_expiration_date'].touched)
            }"
            placeholder="credit card expiration date"/>
            <div *ngIf="payment_step && payment.controls['credit_card_expiration_date'].errors">
                <div class="error" *ngIf="paymentControls['credit_card_expiration_date'].errors?.['required']">Credit card expiration date is required</div>
            </div>
            <label>Credit card security code</label>

            <input type="password" class="input" formControlName="credit_card_security_code"
            [ngClass]="{
              'has-danger': payment.controls['credit_card_security_code'].invalid && (payment.controls['credit_card_security_code'].dirty || payment.controls['credit_card_security_code'].touched),
              'has-success': payment.controls['credit_card_security_code'].valid && (payment.controls['credit_card_security_code'].dirty || payment.controls['credit_card_security_code'].touched)
            }"
            placeholder="credit card security code"/>
            <div *ngIf="payment_step && payment.controls['credit_card_security_code'].errors">
                <div class="error" *ngIf="paymentControls['credit_card_security_code'].errors?.['required']">Credit card security code is required</div>
            </div>
            <button (click)="previous()" type="button" class="previous action-button-previous">Previous</button>
            <button (click)="next()"type="button" class="submit action-button" >Next</button>
        </fieldset>
    </form>
    <!-- Confirmation -->
       <form [formGroup]="confirmation" id="msform">
          <fieldset *ngIf="step == 3">
              <h2 class="fs-title">Confirmation</h2>
              <div>
                <label >Total Price: <span>{{totalPrice}}</span></label>
              </div>
              <div>
                <label >Price per GB: <span>{{subscription.get('duration')?.value.price_usd_per_gb}}</span></label>
              </div>


              <input type="text" class="input" formControlName="email"  placeholder="email"
              [ngClass]="{
                'has-danger': confirmation.controls['email'].invalid && (confirmation.controls['email'].dirty || confirmation.controls['email'].touched),
                'has-success': confirmation.controls['email'].valid && (confirmation.controls['email'].dirty || confirmation.controls['email'].touched)
              }"
              />
              <div *ngIf="confirmation_step && confirmation.controls['email'].errors">
                  <div class="error" *ngIf="confirmationcontrols['email'].errors?.['required']">email is required</div>
              </div>
              <div>
                <input type="checkbox"  formControlName="terms_and_conditions"/>
                <label class="termsconditions">terms and conditions </label>
              </div>

              <div *ngIf="confirmation_step && confirmation.controls['terms_and_conditions'].errors">
                  <div  class="error" *ngIf="confirmationcontrols['terms_and_conditions'].errors?.['required']">Total marks is required</div>
              </div>
              <button (click)="previous()" type="button" name="previous" class="previous action-button-previous" >Previous</button>
              <button (click)="submit()"type="submit" name="submit" class="submit valid-button" >Confirmation</button>
          </fieldset>
      </form>

  </div>
</div>